<!DOCTYPE html>
<html>
<head>
	<title>Tabla Fecha Prode</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
	 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

	<meta charset="utf-8">

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
	<script>
		var ptos_inicio_participantes = {}
		var last_ptos_ptos_participantes = {}

		function get_partidos_put_in_table(){
			var equipos = document.getElementById("partidos").value.split("\n").join("-").split(" ").join("").split("-");


			equipos.forEach( 
				
				(equipo, index) => {
					equipos[index] = equipo.substring(0,3).toUpperCase();
				}

			)

			equipos.forEach( 
				
				(equipo, index) => {
					console.log(equipo)
				}

			)

			let table_ = document.getElementById("tabla");
			let row = table_.insertRow(-1);
			row.insertCell();
			
			for(var i = 0; i<equipos.length; i += 2){
				let cell = row.insertCell();
				cell.innerHTML = "<b>" + equipos[i] + "-" + equipos[i+1] + "</b>";
			}

			//document.getElementById("participante").readOnly = false;
			//document.getElementById("prode").readOnly = false;
			//document.getElementById("partidos").readOnly = true;
			//document.getElementById("button_agregar_partidos").disabled = true;
		}

		function agregar_participante_bulk(){
			let prodes_bulk = document.getElementById("prodes_bulk").value;
			prodes_bulk = prodes_bulk.replaceAll("\n","")
			prodes_bulk += "["
			const regexp_names = /\].+?:/g;
			const regexp_prodes = /[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]:.+?\[/g;
			
			let names_arr = [...prodes_bulk.matchAll(regexp_names)];
			console.log("names_arr", names_arr)
			let prodes_arr = [...prodes_bulk.matchAll(regexp_prodes)];
			console.log("prodes_arr", prodes_arr)

			names_arr = names_arr.map(name => {
				let n = name[0].replace(":","").replace("]","").trim()
				return n
			})

			prodes_arr = prodes_arr.map(p => {
				return p[0].substr(5.)
			})

			if(Object.keys(ptos_inicio_participantes).length === 0){
				for(let i = 0; i<names_arr.length; i++){
					agregar_participante_params(names_arr[i],prodes_arr[i],true)
				}
			} else {
				for(let i = 0; i<names_arr.length; i++){			
					agregar_participante_params(names_arr[i],prodes_arr[i],false)
				}
			}
			update_ptos_inicio_participantes()
			//console.log(names_arr)
			//console.log(prodes_arr)
		}

		function agregar_participante_params(participante_nombre, resultados_str, agregardecero){
			//var participante_nombre = document.getElementById("participante").value;

			if(agregardecero){
				var participante_ptos =   0;
				var participante_plenos = 0;
				var participante_goles =  0;

				ptos_inicio_participantes[participante_nombre] = {
					puntos:participante_ptos,
					plenos:participante_plenos,
					goles:participante_goles,
				}				
			}

			var resultados = resultados_str.replace(/\D/g, "").split("");
			//dobles con espcio .match(/\d\d?/g, "")

			participante.value = "";
			resultados.value = "";

			if(participante != "" && resultados_str.value != ""){
				let table_ = document.getElementById("tabla");
				let row = table_.insertRow(-1);
				let cell_nombre = row.insertCell();
				cell_nombre.innerHTML = participante_nombre;

				let tiene_resultados_iguales = []
				for(var i = 0; i<resultados.length; i += 2){
					let cell = row.insertCell();
					cell.innerHTML = resultados[i] + "-" + resultados[i+1];
					tiene_resultados_iguales.push(cell.innerHTML)
				}
				var dic_equals = tiene_resultados_iguales.reduce(function(obj, b) {
				  obj[b] = ++obj[b] || 1;
				  return obj;
				}, {});

				Object.keys(dic_equals).forEach(k => {
					if(dic_equals[k] > 6){
						alert(`¡¡¡¡¡¡¡Participate ${participante_nombre} con más de 6 resultados iguales!!!!!!!`)
					}
				})

				let cell_del = row.insertCell();
					cell_del.innerHTML = '<button onclick=delete_row('+row.rowIndex+')> X</button>';
			} else {
				alert("Participate o prode vacío")
			}


			print_tab()

		}


		function agregar_participante(){
			var participante_nombre = document.getElementById("participante").value;

			var participante_ptos = document.getElementById("participante_ptos").value;
			var participante_plenos = document.getElementById("participante_plenos").value;
			var participante_goles = document.getElementById("participante_goles").value;

			ptos_inicio_participantes[participante_nombre] = {
				puntos:participante_ptos,
				plenos:participante_plenos,
				goles:participante_goles,
			}

			var resultados = document.getElementById("prode").value.replace(/\D/g, "").split("");
			//dobles con espcio .match(/\d\d?/g, "")

			participante.value = "";
			resultados.value = "";

			if(participante != "" && document.getElementById("prode").value != ""){
				let table_ = document.getElementById("tabla");
				let row = table_.insertRow(-1);
				let cell_nombre = row.insertCell();
				cell_nombre.innerHTML = participante_nombre;

				let tiene_resultados_iguales = []
				for(var i = 0; i<resultados.length; i += 2){
					let cell = row.insertCell();
					cell.innerHTML = resultados[i] + "-" + resultados[i+1];
					tiene_resultados_iguales.push(cell.innerHTML)
				}
				var dic_equals = tiene_resultados_iguales.reduce(function(obj, b) {
				  obj[b] = ++obj[b] || 1;
				  return obj;
				}, {});

				Object.keys(dic_equals).forEach(k => {
					if(dic_equals[k] > 6){
						alert(`¡¡¡¡¡¡¡Participate ${participante.value} con más de 6 resultados iguales!!!!!!!`)
					}
				})

				let cell_del = row.insertCell();
					cell_del.innerHTML = '<button onclick=delete_row('+row.rowIndex+')> X</button>';
			} else {
				alert("Participate o prode vacío")
			}


			print_tab()

		}


		function delete_row(row_n){
			let table_ = document.getElementById("tabla");
			let name = table_.rows[row_n].cells[0].innerHTML
			delete ptos_inicio_participantes[name]
			table_.deleteRow(row_n);
		}

		function download(content, fileName, contentType) {
		    var a = document.createElement("a");
		    var file = new Blob([content], {type: "text/plain"});
		    a.href = URL.createObjectURL(file);
		    a.download = fileName;
		    a.click();
		}

		const get_json = () => {
			var table = document.getElementById("tabla");
			let partidos = []
			//table.rows[0]
			for (var j = 0, col; col = table.rows[0].cells[j]; j++) {
				let part = col.innerHTML
				partidos.push(part.replace("<b>", "").replace("</b>",""))
				console.log(part)
				//console.log(i,j,col.innerHTML)
				//if(j==0) break;			
			}
				
			var exp_json = []
			for (var i = 1, row; row = table.rows[i]; i++) {
				let prode = {}
				prode.participante =  row.cells[0].innerHTML
				console.log("NOMBRE", row.cells[0].innerHTML)
				let arr_res = []
				for (var j = 1, col; col = row.cells[j]; j++) {
					let part = col.innerHTML
					arr_res.push(part)
					console.log("RESULTADO", col.innerHTML)
					if(row.cells.length-2 == j) j++
				}
				prode.resultados = arr_res
				exp_json.push(prode)
			}

			console.log({prodes: exp_json})

			var jsonData = JSON.stringify({
				prodes: exp_json, 
				partidos: partidos, 
				puntos_inicales: ptos_inicio_participantes,
				reales: document.getElementById("reales").value,
			});

			return jsonData
		}

		const export_json = () => {
			let jsonData = get_json()

			download(jsonData, "json_file.json")
		}

		const save_json_local_storage = (name="test_prode") => {
			let prodes_from_local = localStorage.getItem('prodes');
			if(!prodes_from_local){
				prodes_from_local = {}
			} else{
				prodes_from_local = JSON.parse(prodes_from_local)
			}
			let jsonData = get_json()
			prodes_from_local[name] = jsonData
			prodes_from_local.last = jsonData

			console.log("name", prodes_from_local)
			
			localStorage.setItem('prodes', JSON.stringify(prodes_from_local));

			console.log(localStorage.getItem('prodes'))
		}		

		const onclick_save_json_local_storage = () => {
			var nombre_save = document.getElementById("local_nombre").value;
			if(nombre_save === ""){
				alert("ponele un nombre salame")
			} else {
				save_json_local_storage(nombre_save)
				get_from_local_to_pop_select()
			}
		}

		const get_json_local_storage = (name="test_prode") => {
			let prodes_from_local = localStorage.getItem('prodes');
			console.log(prodes_from_local)
			prodes_from_local = JSON.parse(prodes_from_local)

			let jsonData = prodes_from_local[name]
			load_json_str_in_table(jsonData)
		}

		const delete_json_local_storage = (name="test_prode") => {
			let prodes_from_local = localStorage.getItem('prodes');
			if(prodes_from_local){
				if (window.confirm(`Estás seguro que querés eliminar ${name}???`)) {
					prodes_from_local = JSON.parse(prodes_from_local)
					delete prodes_from_local[name]
					localStorage.setItem('prodes', JSON.stringify(prodes_from_local));
				}
			}
		}


		const onclick_get_json_local_storage = () => {
			var nombre_load = document.getElementById("locales").value;
			//console.log(nombre_load)
			get_json_local_storage(nombre_load)
		}
		

		const onclick_delete_json_local_storage = () => {
			var nombre_delete = document.getElementById("locales").value;
			delete_json_local_storage(nombre_delete)
			get_from_local_to_pop_select()
		}

		const get_from_local_to_pop_select = () => {
			let prodes_from_local = localStorage.getItem('prodes');
			prodes_from_local = JSON.parse(prodes_from_local)
			
			let select_element = document.getElementById("locales")
			select_element.innerHTML = ""
			Object.keys(prodes_from_local).forEach(k => {
				var option = document.createElement("option");
				option.value = k;
				option.text = k;
				select_element.appendChild(option);
			})
		}

		const cambiar_color_tabla_ptos = (serie) => {
			let tabla = document.getElementById("tabla_ptos_total");

			for (var i = 0, row; row = tabla.rows[i]; i++) {
				row.style.backgroundColor = ""
				row.className = ""
			}
			for (var i = 0, row; row = tabla.rows[i]; i++) {
				let trl = tabla.rows.length
				let green = "bg-success"
				let dark_green = "#0f5132"
				let orange = "#fd7e14"
				let yellow = "#ffc107"
				let red = "bg-danger"
				let pink = "#F5B6CD"

				//let row = tabla.insertRow(-1);
				if(serie == "seriea"){
					if(i === 1) row.style.backgroundColor = dark_green
					
					//if(i === 2) row.style.backgroundColor = pink
					//if(i === 3) row.style.backgroundColor = pink
					//if(i === 4) row.style.backgroundColor = pink
					
					if(i >= trl-3) row.style.backgroundColor = orange
					if(i >= trl-2 || i >= trl-1) row.className = red
				}
				if(serie == "serieb"){
					if(i === 1) row.style.backgroundColor = dark_green
					if(i === 2) row.className = green
					if(i === 3) row.className = row.style.backgroundColor = yellow
					if(i >= trl-4) row.style.backgroundColor = orange
					if(i >= trl-3 || i >= trl-2 || i >= trl-1) row.className = red
				}
				if(serie == "seriec"){
					if(i === 1) row.style.backgroundColor = dark_green
					if(i === 2 || i===3) row.className = green
					if(i === 4) row.className = row.style.backgroundColor = yellow
					if(i >= trl-4) row.style.backgroundColor = orange
					if(i >= trl-3 || i >= trl-2 || i >= trl-1) row.className = red
				}
				if(serie == "seried"){
					if(i === 1) row.style.backgroundColor = dark_green
					if(i === 2 || i===3) row.className = green
					if(i === 4) row.className = row.style.backgroundColor = yellow
				}
			}
		} 

		const tablar = (ptos_p, tabla_id) => {
			let tabla = document.getElementById(tabla_id);
			tabla.innerHTML = ""
			
			let row_b = tabla.insertRow(-1);
			row_b.insertCell().innerHTML = "Participate";
			row_b.insertCell().innerHTML = "Ptos";
			row_b.insertCell().innerHTML = "Plenos";
			row_b.insertCell().innerHTML = "Goles";
			
			let ptos_sort = ptos_p.sort((a,b) => {
				if (a.puntos > b.puntos) return -1;
				if (a.puntos < b.puntos) return 1;

				if (a.plenos > b.plenos) return -1;
				if (a.plenos < b.plenos) return 1;

				if (a.goles > b.goles) return -1;
				if (a.goles < b.goles) return 1;
			})

			let cantidad_desc = 2
			for(var i = 0; i<ptos_p.length; i++){
				let row = tabla.insertRow(-1);
				//if(i===0) row.className = "bg-success"
				//if(i===1) row.className = "bg-success"
				//if(i >= ptos_p.length-cantidad_desc) row.className = "bg-danger"
				let cell_nombre = row.insertCell();
				cell_nombre.innerHTML = ptos_p[i].participante;

				let cell_pts = row.insertCell();
				cell_pts.innerHTML = ptos_p[i].puntos
				let cell_plenos = row.insertCell();
				cell_plenos.innerHTML = ptos_p[i].plenos
				let cell_goles = row.insertCell();
				cell_goles.innerHTML = ptos_p[i].goles
			}
		}

		//here
		const cargar_part_from_json = (json_file) => {
			console.log(typeof(json_file))
			let table_ = document.getElementById("tabla");
			let row_match = table_.insertRow(-1);
			//row_match.insertCell();
			for(var i = 0; i<json_file.partidos.length; i++){
				let cell = row_match.insertCell();
				cell.innerHTML = "<b>" + json_file.partidos[i] + "</b>";
			}
			//row_match.insertCell();

			for(var i = 0; i<json_file.prodes.length; i++){
				let row = table_.insertRow(-1);
				let cell_nombre = row.insertCell();
				cell_nombre.innerHTML = json_file.prodes[i].participante;
					
				for(var j = 0; j<json_file.prodes[i].resultados.length; j++){
					let cell = row.insertCell();
					cell.innerHTML = json_file.prodes[i].resultados[j]
				}

				let cell_del = row.insertCell();
				cell_del.innerHTML = '<button onclick=delete_row('+row.rowIndex+')> X</button>';
			}		
			
		}

		const load_json_str_in_table = (str_json) => {
			var obj = JSON.parse(str_json);

			console.log(obj)
			cargar_part_from_json(obj)
			if(obj.reales){
				document.getElementById("reales").value = obj.reales
			}
			ptos_inicio_participantes = obj.puntos_inicales

			console.log(obj.puntos_inicales)
			//document.getElementById("participante").readOnly = false;
			//document.getElementById("prode").readOnly = false;
			//document.getElementById("partidos").readOnly = true;
			//document.getElementById("button_agregar_partidos").disabled = true;
		}

		const import_json = () => {
			//console.log(document.getElementById('input_import'))

			var file = document.getElementById("input_import").files[0];

			if (file) {
			    var reader = new FileReader();
			    reader.readAsText(file, "UTF-8");
			    reader.onload = function (evt) {
			    	//console.log(JSON.stringify(evt.target.result))
			    	load_json_str_in_table(evt.target.result)
			    }
			    reader.onerror = function (evt) {
			    	console.log("error reading file")
			    }
			}
		}

		const print_tab = () => {
			let resultados_arr = []
			var resultados = document.getElementById("reales").value.replace(/\D/g, "").split("");
			for(var i = 0; i<resultados.length; i += 2){
				resultados_arr.push(resultados[i] + "-" + resultados[i+1])
			}
			var table = document.getElementById("tabla");
			let r_ind = 0;

			let ptos_participantes = []
			let ptos_fecha = 0
			let plenos_fecha = 0
			let goles_fecha = 0

			var _msjs = document.getElementById("mensajes");
			_msjs.innerHTML = ""
			
			//
			const append_to_msjs = (msj) => {
				var node = document.createElement("p");  
				node.innerHTML = msj
				var msjs = document.getElementById("mensajes");
				msjs.appendChild(node)

			}

			var curr_p = 1;
			   
			for (var i = 1, row; row = table.rows[i]; i++) {			  
			   ptos_fecha = 0
			   plenos_fecha = 0
			   goles_fecha = 0
			   for (var j = 1, col; col = row.cells[j]; j++) {
			     let real = resultados_arr[r_ind]
			     let part = col.innerHTML
			     console.log("col", col.innerHTML)
			     console.log("real", resultados_arr[r_ind])
			     if(!real) break;
			     let glr = parseInt(real.split("-")[0])
			     let gvr = parseInt(real.split("-")[1])
				 let plr = parseInt(part.split("-")[0])
			     let pvr = parseInt(part.split("-")[1])

			     if(real !== "9-9" && part !== "9-9"){
			     	if(real === part){
			     		col.className = "bg-success"
			     		ptos_fecha+=3
			     		plenos_fecha += 1
			     		goles_fecha += plr+pvr
			     		//append_to_msjs(`Suma 3 ${row.cells[0].innerHTML}`)

			     	} else if (glr > gvr && plr > pvr ||
			     		glr < gvr && plr < pvr ||
			     		glr === gvr && plr === pvr ){
						
						col.className = "bg-warning"
						ptos_fecha+=1
						//append_to_msjs(`Suma 1 ${row.cells[0].innerHTML}`)
	
			     	} else {
						col.className = ""			     		
			     	}
			 	}
			     
			     if(row.cells.length-2 == j) j++
			     r_ind++
			     
			   }
			   ptos_participantes.push({participante: row.cells[0].innerHTML, puntos:ptos_fecha, plenos:plenos_fecha, goles:goles_fecha})
			   r_ind=0  
				
			}

			
			//console.log("PTOS::SUMADOS", ptos_participantes)
			tablar(ptos_participantes, "tabla_ptos")
			
			console.log(ptos_inicio_participantes)
			let total_ptosp = [...ptos_participantes]
			console.log(ptos_inicio_participantes)
			total_ptosp.map(p =>{
				p.puntos += ptos_inicio_participantes[p.participante] ? parseInt(ptos_inicio_participantes[p.participante].puntos) : 0
				p.plenos += ptos_inicio_participantes[p.participante] ? parseInt(ptos_inicio_participantes[p.participante].plenos) : 0
				p.goles += ptos_inicio_participantes[p.participante] ? parseInt(ptos_inicio_participantes[p.participante].goles) : 0
			})

			const pts_pls_gls = {}
			total_ptosp.forEach(p=>{
			  pts_pls_gls[p.participante] = {"puntos":p.puntos.toString(),"plenos":p.plenos.toString(),"goles":p.goles.toString()}
			})
			console.log("PTOS::SUMADOS::", pts_pls_gls)
			
			console.log("TOtal ptos" ,total_ptosp)
			tablar(total_ptosp, "tabla_ptos_total")
			console.log("ptos_participantes", ptos_participantes)
			let obj_parts = {}
			total_ptosp.forEach(p => {
				obj_parts[p.participante] = {puntos: p.puntos,plenos: p.plenos,goles: p.goles}
			})
			last_ptos_ptos_participantes = {...obj_parts}
			onchangeselect_change_color_table_ptos()
			//if(navigator?.clipboard){
			//	navigator.clipboard.writeText(JSON.stringify(obj_parts));
			//}

		}

		const update_ptos_inicio_participantes = () => {
			//console.log(ptos_inicio_participantes)
			let d = document.getElementById("ptos_tabla")
			d.innerHTML = ""
			let updates = []
			console.log("lll", ptos_inicio_participantes)
			Object.keys(ptos_inicio_participantes).forEach(p => {
				var node = document.createElement("div");
				node.innerHTML = p
				
				var in_part = document.createElement("input");
				in_part.value = p
				in_part.onchange = () => {
					//let bk = {...ptos_inicio_participantes[p]}
					//delete ptos_inicio_participantes[p]
					//ptos_inicio_participantes[in_pts.value] = bk
					//print_tab()
				}
				var in_pts = document.createElement("input");
				in_pts.value = ptos_inicio_participantes[p].puntos
				var in_plns = document.createElement("input");
				in_plns.value = ptos_inicio_participantes[p].plenos
				var in_gols = document.createElement("input");
				in_gols.value = ptos_inicio_participantes[p].goles
				in_pts.onchange = () => {
					//ptos_inicio_participantes[p].puntos = in_pts.value
					//print_tab()
				}
				in_plns.onchange = () => {
					//ptos_inicio_participantes[p].plenos = in_pts.value
					//print_tab()
				}
				in_gols.onchange = () => {
					//ptos_inicio_participantes[p].goles = in_gols.value
					//print_tab()
				}

				d.appendChild(node)
				d.appendChild(in_part)
				d.appendChild(in_pts)
				d.appendChild(in_plns)
				d.appendChild(in_gols)

				var update_button = document.createElement("button");
				update_button.innerHTML = "Actualizar"
				var update_f =  () => {
					ptos_inicio_participantes[p].puntos = in_pts.value
					ptos_inicio_participantes[p].plenos = in_plns.value
					ptos_inicio_participantes[p].goles = in_gols.value
					//print_tab()
					var new_name = in_part.value
					var bk = {...ptos_inicio_participantes[p]}
					delete ptos_inicio_participantes[p]
					var table = document.getElementById("tabla");
					for (var i = 1, row; row = table.rows[i]; i++) {
						if(row.cells[0].innerHTML == p){
							row.cells[0].innerHTML = new_name
						}
					}
					console.log(ptos_inicio_participantes)
					ptos_inicio_participantes[new_name] = {...bk}
					
					print_tab()
					update_ptos_inicio_participantes()
				}
				updates.push(update_f)
				//d.appendChild(update_button)
			})

			var updateall_button = document.createElement("button");
			updateall_button.innerHTML = "Actualizar"
				
			updateall_button.onclick = () => {
				updates.forEach(x => x())
				print_tab()
				update_ptos_inicio_participantes()
			}
			d.appendChild(updateall_button)
		}

		download_img_table = () => {
			html2canvas(document.getElementById("data_download")).then(canvas => {
			    //document.body.appendChild(canvas)
			    //canvas.toDataURL("image/png");

			    var link = document.createElement('a');
			  	link.download = 'tabla.png';
			  	link.href = canvas.toDataURL("image/png")
			  	link.click();
			});
		}
		share = () => {
			let url = document.URL
			if(url.includes("?")){
				url =  decodeURI(document.URL).split("?")[0]
			}
			try {
			  navigator.clipboard.writeText(encodeURI(`${url}?prode=${get_json()}`));
			} catch (error) {
			  console.error(error);
			}
			var c = document.createElement("textarea");
			c.value = encodeURI(`${url}?prode=${get_json()}`)
			c.onclick = () => {
				c.select()
			}
			var v = document.createElement("p");
			v.innerHTML = "para compartir copia esto y pasale a alguien"
			document.getElementById("botones_export").appendChild(v)
			document.getElementById("botones_export").appendChild(c)
			//alert("url copiado")
		}

		upload_table_from_get_params = () => {
			//console.log("___________test", document.URL.split("?"))
			let params =  decodeURI(document.URL).split("?")
			//console.log("pamras")
			if(params.length > 1){
				params = params[1]
				params = params.split("=")
				if(params.length > 1){
					load_json_str_in_table(params[1])
					update_ptos_inicio_participantes()
				}
			}	
		}

		//copy_table = () => {
		//	console.log("ptos_participantes", ptos_participantes)
		//}
		
		next_fecha = () => {
			tabla = document.getElementById("tabla")
			tabla1 = document.getElementById("tabla_ptos_total")
			tabla2 = document.getElementById("tabla_ptos")
			tabla.innerHTML = ""
			tabla1.innerHTML = ""
			tabla2.innerHTML = ""
			ptos_inicio_participantes = {...last_ptos_ptos_participantes}
			update_ptos_inicio_participantes()
		}

		get_reales_server = async () => {
			let response  = await fetch('https://juanrodriguez.xyz:8001/scores/22')
			let data = await response.json()
			//console.log(data.resultados)
			let rstring = data.resultados.map(r => {
				return `${r.local} ${r.goles_local}-${r.goles_visitante} ${r.visitante}`
			})

			document.getElementById("reales").value = rstring.join("\n")
		}
		
		onchangeselect_change_color_table_ptos = () => {
			var color = document.getElementById("color_table").value
			cambiar_color_tabla_ptos(color)
		}
	</script>
</head>
<body>
<button onclick="next_fecha()">Proxima fecha</button>
<div class="row">
	<div class="col">
  
		<div class="container">
		<div style="display:none;">
		Participante:<br>
			<input type="text" id="participante" readonly><br>
			Ptos:
			<input type="text" id="participante_ptos" maxlength="4" size="4" value="0">
			Plenos:
			<input type="text" id="participante_plenos" maxlength="4" size="4" value="0"><br>
			Goles:
			<input type="text" id="participante_goles" maxlength="4" size="4" value="0"><br>
			

			Prode:<br>
			<textarea id="prode" readonly></textarea><br>
			<button onclick="agregar_participante()" id="button_agregar_prode">Agregar</button><br>
		</div>
		Magic:<br>
		<textarea id="prodes_bulk"></textarea><br>
		<button onclick="agregar_participante_bulk()" id="button_agregar_bulk">Agregar</button><br>
		</div>
	</div>
	<div class="col">
		reales:<br>
		(para saltear un resultado pongan 9-9)<br>

		<textarea id="reales"></textarea><br>
		<button onclick="print_tab()" id="button_agregar_prode">Comparar</button><br><button onclick="get_reales_server()" id="reales_automaticos">Resultados Automáticos</button><br><br>
		<button onclick="export_json()" id="button_exp">Exportar</button><br>
		<button onclick="import_json()" id="button_exp">Importar</button><input id="input_import" type="file">
		
		<br><br>
		
		</div>
	<div class="col">
  		Partidos:<br>
		<textarea id="partidos"></textarea><br>
		<button onclick="get_partidos_put_in_table()" id="button_agregar_partidos">Agregar</button><br>


		<div class="col">
  			<div>Locales:
				</div>
  			<div>
					<select name="locales" size="4" id="locales">
	  				
					</select>
					<script>get_from_local_to_pop_select()</script>
					
			</div>
			<div>
				<button onclick="onclick_get_json_local_storage()" id="button_exp">Cargar Local</button>
				<button onclick="onclick_delete_json_local_storage()" id="button_exp">Eliminar Local</button>
			</div>
			<br>
			
			<div>
				<input type="text" id="local_nombre" maxlength="16" size="16" placeholder="nombre para guardar"><br>
			</div>
			<div>
				<button onclick="onclick_save_json_local_storage()" id="button_exp">Guardar Local</button>
			</div>
			<br>
			<div>
				<button onclick="get_json_local_storage('last')" id="button_exp">Cargar Último</button>
			</div>

	</div>

		
	</div>
</div>

<br>
<br>
<script>
	change_color_table = (b) => {
		console.log(b)
		var mytable = document.getElementById("tabla");
		mytable.className = "table table-" + b.className.split("-")[1]
	}

</script>
Color:<button type="button" class="btn btn-primary" onclick="change_color_table(this)">Primary</button>
<button type="button" class="btn btn-secondary" onclick="change_color_table(this)">Secondary</button>
<button type="button" class="btn btn-success" onclick="change_color_table(this)">Success</button>
<button type="button" class="btn btn-danger" onclick="change_color_table(this)">Danger</button>
<button type="button" class="btn btn-warning" onclick="change_color_table(this)">Warning</button>
<button type="button" class="btn btn-info" onclick="change_color_table(this)">Info</button>
<button type="button" class="btn btn-light" onclick="change_color_table(this)">Light</button>
<button type="button" class="btn btn-dark" onclick="change_color_table(this)">Dark</button>

<br>
<br>

<div id="data_download">
<table id="tabla" class="table table-dark">

</table>

<div id="tablafecha">
	<div class="row">
		<div class="col">
			<table id="tabla_ptos" class="table table-dark">

			</table>
		</div>
		<div class="col">
			<table id="tabla_ptos_total" class="table table-dark">

			</table>

			<label for="pet-select">COLOR TABLA PTOS:</label>
			<select name="color_table" id="color_table" onchange="onchangeselect_change_color_table_ptos()">
			  <option value="">--Seleccionar un color--</option>
			  <option value="seriea">Serie A</option>
			  <option value="serieb">Serie B</option>
			  <option value="seriec">Serie C</option>
			  <option value="seried">Serie D</option>
			</select>
			
			
		</div>
	</div>

</div>
</div>
<div id="botones_export">
<button onclick="download_img_table()">DESCARGAR COMO IMAGEN</button>
<button onclick="share()">COMPARTIR</button>
</div>

<div id="ptos_tabla">
	
</div>
<div id="mensajes">

</div>
<script>upload_table_from_get_params()</script>
</body>
</html>
